---
title: "あなたの現場のGoのフォーマット環境整備屋さん 1.フォーマッター選定の巻"
emoji: "⚙️"
type: "tech"
topics:
  - "github"
  - "go"
  - "ci"
  - "formatter"
  - "lefthook"
published: true
published_at: "2026-02-21 02:04"
---

どもーこんちくわ

マクドナルドで執筆しているのですが、マックって夜遅くまで開いているし助かりますな〜

若い人も多いので少し騒がしいくらいがちょうどええ〜

すごい静かなところよりもちょっとざわざわしているくらいが集中しやすいっぽいよ

んで、突然ですが、みなさん現場のコードは整備されている方が良いと思いませんか？

インデントがガタガタとか、謎に半角スペースが入っていて構造体の記載が乱れていたり...

そういうの気になるんです！！

あと、コードを書いたらやはりレビュアーに見てもらう工程が必ず入りますからね、コードをキレイにしてお届けしたいです✨

あと、指摘しずらいですしね笑

フォーマット環境を整備してメンバーに自動で整備してもらおう！

ということで、あらゆるGo開発現場でフォーマット環境整備屋さんをしてきたので、その話をサクッとしようかなとー

今回は、**Goフォーマッター選定編**です

まず、Goのフォーマットってだいたいこの２つがあります。

- gofmt Goの組み込みフォーマッター
- gofumpt gofmtよりも厳格なサードパーティのフォーマッター

他にも色々あるのですが、シンプルにただ整形したいならこれでいいかなと

で、具体的にどう違うの？っていうとー

### gofmt 説明
gofmtはこんなことができます！
- インデントをタブに統一
- 不要なスペース削除
- 波括弧位置を修正

具体的な整備結果はこちらです！

```go
// 波括弧位置を強制
// before
if x == 1
{
	fmt.Println(x)
}
// after
if x == 1 {
	fmt.Println(x)
}

// 複合リテラルの整形
// before
a := []int{1,2,3}
// after
a := []int{1, 2, 3}
```

### gofumpt 説明
それに加えてgofumptの方は?

```go
// 不要な空行を削る
// before
func foo() {

	fmt.Println("hello")

}
// after
func foo() {
	fmt.Println("hello")
}

// 複合リテラルの縦揃え
// before
a := []int{1, 2, 3}
// after
a := []int{
	1,
	2,
	3,
}

// 返却する値をreturnの後に記載する
// ※補足
// 通常の gofumpt では return は書き換えません。
// ただし `-extra` モードでは、名前付き戻り値の naked return を明示的な return err に変更します。
// before
func Foo() (err error) {
	return
}
// after
func Foo() (err error) {
	return err
}

// 宣言をグループ化する
// before
var nicer = "x"
var with = "y"
var alignment = "z"
// after
var (
	nicer     = "x"
	with      = "y"
	alignment = "z"
)
```

このように、gofmtはインデントや半角スペース、括弧などの見やすさに関する整備はしてくれますが、
gofumptは空行を許さなかったり、宣言方法を変更したりとgofmtと比べるとちょいクセ強めな子です笑

どちらか！となれば、メンバーが問題なく使ってくれそうなgofmtを私はいつも採用します！

gofmtでも、-s(simple)オプションの方が、記載方法をよりシンプルにしてくれる効果があります！

## gofmt -s 説明
具体的な整備結果はこのようになります！
```go
// スライス式の簡略化
// before
s := arr[0:len(arr)]
// after
s := arr[:]

// 不要な型指定を削除
// before
x := []int{int(1), int(2)}
// after
x := []int{1, 2}

// 複合リテラルの簡略化
// 下記と同じ型の変数に代入する場合
p := &Point{X: 1, Y: 2}
// before
var p *Point = &Point{X: 1, Y: 2}
// after
p := &Point{X: 1, Y: 2}
```

gofmt -sがおすすめです！

ということで、gofmt -sにしましょう!!

次回はgofmt -sを使用したCIの設定方法について！

